<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Previewer</title>
</head>
<body class="bg-black">
    <div id="root"></div>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/778fdc401a.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- Babel Script -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        
      const app = document.getElementById('root');

      function App() {
        return (
            <MarkBox/>
        )
      }

      function MarkBox() {

        const [text, setText] = React.useState('## kkkkkkk  \n# kkkkk \naí \n### and here are som cool stuff! \nsim peçanhaaoeijawoiejaoiwejawioej')

        function handleText(e) {
          console.log(e.target.value)
          const areaText = e.target.value;
          // const finalText = "<div className='text-5xl'>" + areaText + "</div>";
          setText(areaText)
        }

        return (
            <React.Fragment>
                <div className=' flex flex-col gap-10 items-center'>
                    <textarea id='editor' className="mt-20 resize h-60 w-[30rem]" placeholder='Write your text here...'
                      value={text}
                      onChange={handleText}
                    ></textarea>
                    <div id='preview' className='mt-20 text-lg text-white w-4/5'>
                      <MarkDownParser enteredText={text}/>
                    </div>
                </div>
            </React.Fragment>

        )
      }

      function MarkDownParser({enteredText}) {
        let etArray = enteredText.split(/\r?\n/);

        let h1_Title = /^# /;
        let h2_Title = /^## /;
        let h3_Title = /^### /;
        let lineReturn;
        return (
          etArray.map(line => {

            if (h1_Title.test(line)) {
              lineReturn = line.replace(h1_Title, '')
              return (
                <div className='text-6xl w-full h-16 font-bold border-b-2 border-indigo-500 mb-10 leading-[3.2rem]'>{lineReturn}</div>
              )
            } else if (h2_Title.test(line)) {
              lineReturn = line.replace(h2_Title, '')
              return (
                <div className='text-4xl w-full h-16 font-bold border-b-[1px] border-indigo-500 leading-[5rem]	mb-8'>{lineReturn}</div>
              )
            } else if (h3_Title.test(line)) {
              lineReturn = line.replace(h3_Title, '')
              return (
                <div className='text-3xl w-full h-16 font-bold leading-[5rem]	mb-8'>{lineReturn}</div>
              )
            } else { 
              return <div className='text-2xl h-16 text-center mb-2'>{line}</div>
            }

          })
        )
      }

      ReactDOM.render(<App/>, app);
    </script>
</body>
</html>